import { IntoKeyExpr } from "./key_expr.js";
import { Sample } from "./sample.js";
import { Reply } from "./query.js";
import { Subscriber } from "./pubsub.js";
import { TimeDuration } from 'typed-duration';
import { ChannelReceiver, Handler } from "./channels.js";
import { SessionInner, LivelinessTokenId } from "./session_inner.js";
import { CancellationToken } from "./cancellation_token.js";
/**
 * Options for a Liveliness Subscriber
 * @prop {boolean=} history - If true, subscriber will receive the state change notifications for liveliness tokens that were declared before its declaration
 * @prop {Handler<Sample>=} handler - Handler for this subscriber
 */
interface LivelinessSubscriberOptions {
    history?: boolean;
    handler?: Handler<Sample>;
}
/**
 * Options for a Liveliness Subscriber
 * @prop {TimeDuration=} timeout - This liveliness query timeout value
 * @prop {Handler<Sample>=} handler - Handler for this liveliness query
 * @prop {CancellationToken=} cancellationToken - Token to interrupt the query. Warning: This API has been marked as unstable: it works as advertised, but it may be changed in a future release.
 */
interface LivelinessGetOptions {
    timeout?: TimeDuration;
    handler?: Handler<Reply>;
    cancellationToken?: CancellationToken;
}
export declare class Liveliness {
    private session;
    constructor(session: SessionInner);
    declareToken(intoKeyExpr: IntoKeyExpr): Promise<LivelinessToken>;
    /**
     * Declares a subscriber on liveliness tokens that intersect specified keyexpr
     *
     * @param {IntoKeyExpr} intoKeyExpr - The key expression to subscribe to
     * @param {LivelinessSubscriberOptions=} livelinessSubscriberOpts - options for the liveliness subscriber
     *
     * @returns Liveliness Subscriber
     */
    declareSubscriber(intoKeyExpr: IntoKeyExpr, livelinessSubscriberOpts?: LivelinessSubscriberOptions): Promise<Subscriber>;
    /**
     * Queries liveliness tokens currently on the network intersecting with specified key expression
     * @param intoKeyExpr - key expression to query
     * @param livelinessGetOpts - options passed to get operation
     *
     */
    get(intoKeyExpr: IntoKeyExpr, livelinessGetOpts?: LivelinessGetOptions): Promise<ChannelReceiver<Reply> | undefined>;
}
/** A token whose liveliness is tied to the Zenoh [`Session`](Session).
 *
 * A declared liveliness token will be seen as alive by any other Zenoh
 * application in the system that monitors it while the liveliness token
 * is not undeclared or dropped, while the Zenoh application that declared
 * it is alive (didn't stop or crashed) and while the Zenoh application
 * that declared the token has Zenoh connectivity with the Zenoh application
 * that monitors it.
 */
export declare class LivelinessToken {
    private session;
    private id;
    constructor(session: SessionInner, id: LivelinessTokenId);
    undeclare(): Promise<void>;
    [Symbol.asyncDispose](): Promise<void>;
}
export {};
